{% extends "base.html" %}

{% block title %}Dashboard - TalentScope AI{% endblock %}

{% block content %}
<!-- Top Header -->
<div class="top-header">
    <div>
        <h1>
            <i class="fas fa-th-large"></i>
            Dashboard
        </h1>
        <p>Visão geral do seu recrutamento</p>
    </div>
    <a href="{{ url_for('new_job') }}" class="btn btn-primary">
        <i class="fas fa-plus"></i> Nova Vaga
    </a>
</div>

<!-- Stats Cards -->
<div class="stats-row">
    <div class="stat-card">
        <div class="stat-content">
            <h6>Total de Vagas</h6>
            <div class="number">{{ total_jobs }}</div>
            <div class="subtitle">
                <i class="fas fa-arrow-up"></i> Ativo
            </div>
        </div>
        <i class="fas fa-briefcase stat-icon"></i>
    </div>

    <div class="stat-card">
        <div class="stat-content">
            <h6>Total de Candidatos</h6>
            <div class="number">{{ total_candidates }}</div>
            <div class="subtitle">
                <i class="fas fa-arrow-up"></i> No pipeline
            </div>
        </div>
        <i class="fas fa-users stat-icon"></i>
    </div>

    <div class="stat-card">
        <div class="stat-content">
            <h6>Pendentes</h6>
            <div class="number">{{ pending_candidates }}</div>
            <div class="subtitle">
                <i class="fas fa-clock"></i> Aguardando análise
            </div>
        </div>
        <i class="fas fa-clock stat-icon"></i>
    </div>

    <div class="stat-card">
        <div class="stat-content">
            <h6>Score Médio IA</h6>
            <div class="number">{{ avg_score }}%</div>
            <div class="subtitle">
                <i class="fas fa-chart-line"></i> Qualidade média
            </div>
        </div>
        <i class="fas fa-brain stat-icon"></i>
    </div>
</div>

<!-- Content Grid -->
<div class="content-grid">
    <!-- Vagas Recentes -->
    <div class="content-card">
        <div class="content-card-header">
            <h5>Vagas Recentes</h5>
            <a href="{{ url_for('jobs') }}">Ver Todas</a>
        </div>
        <div class="content-card-body">
            {% if recent_jobs %}
                {% for job in recent_jobs %}
                <div class="job-item">
                    <h6>{{ job.title }}</h6>
                    <div class="job-meta">
                        <span><i class="fas fa-calendar"></i> {{ job.created_at.strftime('%d/%m/%Y') }}</span>
                    </div>
                    <div class="job-footer">
                        <small>Criada em {{ job.created_at.strftime('%d/%m/%Y') }}</small>
                        <a href="{{ url_for('job_detail', job_id=job.id) }}" class="btn btn-outline-primary btn-sm">
                            Ver
                        </a>
                    </div>
                </div>
                {% endfor %}
            {% else %}
                <div class="text-center py-5">
                    <i class="fas fa-briefcase" style="font-size: 48px; color: #DEE2E6; margin-bottom: 16px;"></i>
                    <p style="color: #6C757D; margin-bottom: 16px;">Nenhuma vaga cadastrada</p>
                    <a href="{{ url_for('new_job') }}" class="btn btn-primary">
                        <i class="fas fa-plus"></i> Criar Primeira Vaga
                    </a>
                </div>
            {% endif %}
        </div>
    </div>

    <!-- Sidebar Direita -->
    <div>
        <!-- Ações Rápidas -->
        <div class="content-card" style="margin-bottom: 20px;">
            <div class="content-card-header">
                <h5>Ações Rápidas</h5>
            </div>
            <div class="content-card-body">
                <div class="quick-actions-grid">
                    <a href="{{ url_for('new_job') }}" class="action-btn primary">
                        <i class="fas fa-plus-circle"></i>
                        <span>Nova Vaga</span>
                    </a>
                    <a href="{{ url_for('jobs') }}" class="action-btn">
                        <i class="fas fa-briefcase"></i>
                        <span>Ver Vagas</span>
                    </a>
                    <a href="{{ url_for('candidate_space') }}" class="action-btn">
                        <i class="fas fa-user-plus"></i>
                        <span>Candidatos</span>
                    </a>
                    <a href="{{ url_for('calendar') }}" class="action-btn">
                        <i class="fas fa-calendar-alt"></i>
                        <span>Agenda</span>
                    </a>
                </div>
            </div>
        </div>

        <!-- Atividades Recentes -->
        <div class="content-card" style="margin-bottom: 20px;">
            <div class="content-card-header">
                <h5>Atividades Recentes</h5>
            </div>
            <div class="content-card-body">
                <div class="activity-item">
                    <div class="activity-icon success">
                        <i class="fas fa-check"></i>
                    </div>
                    <div class="activity-content">
                        <p>Nova vaga publicada</p>
                        <small>Há 2 horas</small>
                    </div>
                </div>
                <div class="activity-item">
                    <div class="activity-icon info">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="activity-content">
                        <p>3 novos candidatos</p>
                        <small>Há 5 horas</small>
                    </div>
                </div>
                <div class="activity-item">
                    <div class="activity-icon warning">
                        <i class="fas fa-clock"></i>
                    </div>
                    <div class="activity-content">
                        <p>Entrevista agendada</p>
                        <small>Ontem</small>
                    </div>
                </div>
            </div>
        </div>

        <!-- Métricas de Performance -->
        <div class="content-card">
            <div class="content-card-header">
                <h5>Performance</h5>
            </div>
            <div class="content-card-body">
                <div class="metric-item">
                    <span class="metric-label">Taxa de Conversão</span>
                    <span class="metric-value">68%</span>
                </div>
                <div class="metric-item">
                    <span class="metric-label">Tempo Médio</span>
                    <span class="metric-value">15 dias</span>
                </div>
                <div class="metric-item">
                    <span class="metric-label">Sistema</span>
                    <span class="metric-badge success">Online</span>
                </div>
                <div class="metric-item">
                    <span class="metric-label">IA Gemini</span>
                    <span class="metric-badge success">Conectado</span>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}