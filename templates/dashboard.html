{% extends "base.html" %}

{% block title %}Dashboard - TalentScope AI{% endblock %}

{% block content %}
<div class="container-fluid">
    <div class="page-header">
        <h1>
            <i class="fas fa-tachometer-alt me-2 text-primary"></i>
            Dashboard
        </h1>
        <p class="lead mb-0">Visão geral do seu recrutamento</p>
    </div>

    <!-- Métricas Principais -->
    <div class="row">
        <div class="col-xl-3 col-md-6 mb-4">
            <div class="card border-start-primary border-3 h-100">
                <div class="card-body">
                    <div class="row align-items-center">
                        <div class="col">
                            <div class="text-xs fw-bold text-primary text-uppercase mb-1">
                                Total de Vagas
                            </div>
                            <div class="h5 mb-0 fw-bold text-gray-800">{{ total_jobs }}</div>
                        </div>
                        <div class="col-auto">
                            <i class="fas fa-briefcase fa-2x text-gray-300"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-xl-3 col-md-6 mb-4">
            <div class="card border-start-success border-3 h-100">
                <div class="card-body">
                    <div class="row align-items-center">
                        <div class="col">
                            <div class="text-xs fw-bold text-success text-uppercase mb-1">
                                Total de Candidatos
                            </div>
                            <div class="h5 mb-0 fw-bold text-gray-800">{{ total_candidates }}</div>
                        </div>
                        <div class="col-auto">
                            <i class="fas fa-users fa-2x text-gray-300"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-xl-3 col-md-6 mb-4">
            <div class="card border-start-info border-3 h-100">
                <div class="card-body">
                    <div class="row align-items-center">
                        <div class="col">
                            <div class="text-xs fw-bold text-info text-uppercase mb-1">
                                Pendentes
                            </div>
                            <div class="h5 mb-0 fw-bold text-gray-800">{{ pending_candidates }}</div>
                        </div>
                        <div class="col-auto">
                            <i class="fas fa-clock fa-2x text-gray-300"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-xl-3 col-md-6 mb-4">
            <div class="card border-start-warning border-3 h-100">
                <div class="card-body">
                    <div class="row align-items-center">
                        <div class="col">
                            <div class="text-xs fw-bold text-warning text-uppercase mb-1">
                                Score Médio IA
                            </div>
                            <div class="h5 mb-0 fw-bold text-gray-800">{{ avg_score }}%</div>
                        </div>
                        <div class="col-auto">
                            <i class="fas fa-brain fa-2x text-gray-300"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Conteúdo Principal -->
    <div class="row">
        <!-- Coluna Esquerda -->
        <div class="col-lg-8">
            <!-- Vagas Recentes -->
            <div class="card mb-4">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0">
                        <i class="fas fa-briefcase me-2"></i>
                        Vagas Recentes
                    </h5>
                </div>
                <div class="card-body">
                    {% if recent_jobs %}
                        <div class="list-group list-group-flush">
                            {% for job in recent_jobs %}
                            <div class="list-group-item d-flex justify-content-between align-items-center">
                                <div>
                                    <h6 class="mb-1">{{ job.title }}</h6>
                                    <small class="text-muted">Criada em {{ job.created_at.strftime('%d/%m/%Y') }}</small>
                                </div>
                                <a href="{{ url_for('job_detail', job_id=job.id) }}" class="btn btn-sm btn-outline-primary">
                                    Ver
                                </a>
                            </div>
                            {% endfor %}
                        </div>
                    {% else %}
                        <div class="text-center py-4">
                            <i class="fas fa-briefcase fa-3x text-muted mb-3"></i>
                            <p class="text-muted">Nenhuma vaga cadastrada</p>
                            <a href="{{ url_for('new_job') }}" class="btn btn-primary">
                                <i class="fas fa-plus me-2"></i>Criar Primeira Vaga
                            </a>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- Coluna Direita -->
        <div class="col-lg-4">
            <!-- Ações Rápidas -->
            <div class="card mb-4">
                <div class="card-header bg-success text-white">
                    <h5 class="mb-0">
                        <i class="fas fa-bolt me-2"></i>
                        Ações Rápidas
                    </h5>
                </div>
                <div class="card-body">
                    <div class="d-grid gap-2">
                        <a href="{{ url_for('new_job') }}" class="btn btn-primary">
                            <i class="fas fa-plus me-2"></i>Nova Vaga
                        </a>
                        <a href="{{ url_for('jobs') }}" class="btn btn-outline-primary">
                            <i class="fas fa-list me-2"></i>Ver Todas as Vagas
                        </a>
                        <a href="{{ url_for('candidate_space') }}" class="btn btn-outline-info">
                            <i class="fas fa-user me-2"></i>Espaço Candidato
                        </a>
                        <a href="{{ url_for('calendar') }}" class="btn btn-outline-warning">
                            <i class="fas fa-calendar me-2"></i>Agenda
                        </a>
                    </div>
                </div>
            </div>

            <!-- Status do Sistema -->
            <div class="card">
                <div class="card-header bg-info text-white">
                    <h5 class="mb-0">
                        <i class="fas fa-cog me-2"></i>
                        Status do Sistema
                    </h5>
                </div>
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-center mb-2">
                        <span>Banco de Dados:</span>
                        <span class="badge bg-success">Online</span>
                    </div>
                    <div class="d-flex justify-content-between align-items-center mb-2">
                        <span>IA Gemini:</span>
                        <span class="badge bg-success">Conectado</span>
                    </div>
                    <div class="d-flex justify-content-between align-items-center">
                        <span>Uploads:</span>
                        <span class="badge bg-success">Ativo</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
.card {
    transition: transform 0.2s;
}
.card:hover {
    transform: translateY(-2px);
}
.border-start-primary { border-left-color: #007bff !important; }
.border-start-success { border-left-color: #28a745 !important; }
.border-start-info { border-left-color: #17a2b8 !important; }
.border-start-warning { border-left-color: #ffc107 !important; }
</style>
{% endblock %}